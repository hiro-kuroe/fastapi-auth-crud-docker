# JWT事故対応メモ

## SECRET_KEY を変更したのにログインできない（401）

### 起きること
- /token で発行したトークンが無効になる
- /me や認証付きAPIですべて 401 になる

### 原因
JWTの署名に使用する SECRET_KEY が変わると、
過去に発行されたトークンの検証に失敗するため。

### 切り分けポイント
- トークン発行前後で SECRET_KEY を変更していないか
- Docker 再起動時に .env が変わっていないか

### 対応
- SECRET_KEY 変更後は再ログインしてトークンを再発行する
- 本番環境では SECRET_KEY を安易に変更しない
